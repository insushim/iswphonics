"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{9379:function(e,t,r){r.d(t,{If:function(){return c},X3:function(){return a},YD:function(){return m},YO:function(){return d},ZT:function(){return n},_I:function(){return o},th:function(){return l}});let n={correctAnswer:10,perfectPronunciation:15,firstTry:5,streak3:20,streak5:50,streak10:100,lessonComplete:30,dailyGoal:100,perfectLesson:50,gameWin:50,gameHighScore:100,levelUp:200},i={baseXp:100,xpMultiplier:1.5,maxLevel:50};function s(e){if(e<=1)return 0;let{baseXp:t,xpMultiplier:r}=i;return Math.floor(t*Math.pow(r,e-2))}function a(e){let t=1,r=e;for(;t<i.maxLevel;){let e=s(t+1);if(r<e)break;r-=e,t++}return{level:t,currentXp:r,nextLevelXp:s(t+1)}}let o={correct:["잘했어요! \uD83C\uDF89","정답이에요! ⭐","훌륭해요! \uD83D\uDC4F","멋져요! \uD83C\uDF1F","완벽해요! ✨","대단해요! \uD83C\uDFC6","최고예요! \uD83D\uDC4D"],incorrect:["괜찮아요, 다시 해봐요! \uD83D\uDCAA","조금만 더 노력해봐요! \uD83C\uDF08","포기하지 마세요! ⭐","한 번 더 도전해봐요! \uD83C\uDFAF","실수해도 괜찮아요! \uD83D\uDE0A"],streak:["연속 정답! 대단해요! \uD83D\uDD25","달리고 있어요! \uD83D\uDE80","멈출 수 없어요! ⚡"],levelUp:["레벨업! 축하해요! \uD83C\uDF8A","새로운 레벨 달성! \uD83C\uDFC5","계속 성장하고 있어요! \uD83D\uDCC8"],achievement:["업적 달성! \uD83C\uDFC6","새로운 배지를 얻었어요! \uD83C\uDF96️"]},l={wordMatch:{rounds:5,timeLimit:60,pointsPerMatch:10,bonusTimePoints:5},soundQuiz:{rounds:10,optionCount:4,pointsPerCorrect:10,timeBonusThreshold:3,timeBonus:5},spelling:{rounds:8,hintsAllowed:3,pointsPerCorrect:15,pointsWithHint:10},memory:{pairCount:6,timeLimit:120,pointsPerPair:10,perfectBonus:50}},u={beginner:[{type:"alphabet",title:"알파벳 학습",description:"알파벳 5개를 배워보세요",emoji:"\uD83D\uDD24",targetCount:5,xpReward:30,order:1},{type:"phonics",title:"파닉스 기초",description:"파닉스 규칙 3개를 배워보세요",emoji:"\uD83C\uDFB5",targetCount:3,xpReward:40,order:2},{type:"words",title:"단어 배우기",description:"새로운 단어 5개를 배워보세요",emoji:"\uD83D\uDCDA",targetCount:5,xpReward:35,order:3},{type:"speaking",title:"말하기 연습",description:"단어 3개를 따라 말해보세요",emoji:"\uD83C\uDFA4",targetCount:3,xpReward:40,order:4},{type:"wordMatch",title:"단어 매칭",description:"매칭 게임을 완료하세요",emoji:"\uD83C\uDFAF",targetCount:1,xpReward:50,order:5},{type:"memory",title:"메모리 게임",description:"메모리 게임을 완료하세요",emoji:"\uD83E\uDDE0",targetCount:1,xpReward:50,order:6},{type:"spelling",title:"철자 맞추기",description:"철자 게임에서 3문제를 맞추세요",emoji:"✏️",targetCount:3,xpReward:45,order:7},{type:"soundQuiz",title:"소리 퀴즈",description:"소리 퀴즈에서 3문제를 맞추세요",emoji:"\uD83D\uDD0A",targetCount:3,xpReward:45,order:8}],intermediate:[{type:"alphabet",title:"알파벳 복습",description:"알파벳 10개를 복습하세요",emoji:"\uD83D\uDD24",targetCount:10,xpReward:40,order:1},{type:"phonics",title:"파닉스 학습",description:"파닉스 규칙 5개를 배워보세요",emoji:"\uD83C\uDFB5",targetCount:5,xpReward:50,order:2},{type:"words",title:"단어 마스터",description:"새로운 단어 8개를 배워보세요",emoji:"\uD83D\uDCDA",targetCount:8,xpReward:45,order:3},{type:"speaking",title:"발음 연습",description:"단어 5개를 따라 말해보세요",emoji:"\uD83C\uDFA4",targetCount:5,xpReward:50,order:4},{type:"wordMatch",title:"단어 매칭 챌린지",description:"매칭 게임에서 80점 이상 획득",emoji:"\uD83C\uDFAF",targetCount:80,xpReward:60,order:5},{type:"memory",title:"기억력 챌린지",description:"메모리 게임에서 100점 이상 획득",emoji:"\uD83E\uDDE0",targetCount:100,xpReward:60,order:6},{type:"spelling",title:"철자 챌린지",description:"철자 게임에서 5문제를 맞추세요",emoji:"✏️",targetCount:5,xpReward:55,order:7},{type:"soundQuiz",title:"청취력 테스트",description:"소리 퀴즈에서 5문제를 맞추세요",emoji:"\uD83D\uDD0A",targetCount:5,xpReward:55,order:8}],advanced:[{type:"alphabet",title:"알파벳 완전 정복",description:"모든 알파벳을 완벽하게 복습",emoji:"\uD83D\uDD24",targetCount:26,xpReward:60,order:1},{type:"phonics",title:"고급 파닉스",description:"파닉스 규칙 8개를 마스터하세요",emoji:"\uD83C\uDFB5",targetCount:8,xpReward:70,order:2},{type:"words",title:"단어 정복자",description:"새로운 단어 12개를 배워보세요",emoji:"\uD83D\uDCDA",targetCount:12,xpReward:65,order:3},{type:"speaking",title:"발음 마스터",description:"단어 8개를 완벽하게 발음하세요",emoji:"\uD83C\uDFA4",targetCount:8,xpReward:70,order:4},{type:"wordMatch",title:"매칭 마스터",description:"매칭 게임에서 만점 획득",emoji:"\uD83C\uDFAF",targetCount:100,xpReward:80,order:5},{type:"memory",title:"기억력 마스터",description:"메모리 게임에서 150점 이상 획득",emoji:"\uD83E\uDDE0",targetCount:150,xpReward:80,order:6},{type:"spelling",title:"철자 마스터",description:"철자 게임에서 8문제를 맞추세요",emoji:"✏️",targetCount:8,xpReward:75,order:7},{type:"soundQuiz",title:"청취 마스터",description:"소리 퀴즈에서 8문제를 맞추세요",emoji:"\uD83D\uDD0A",targetCount:8,xpReward:75,order:8}]};function d(e,t){let r=u[e],n=r.filter(e=>["alphabet","phonics","words","speaking"].includes(e.type)),i=r.filter(e=>["wordMatch","memory","spelling","soundQuiz"].includes(e.type)),s=[...n].sort(()=>Math.random()-.5),a=[...i].sort(()=>Math.random()-.5);return[...s.slice(0,2),...a.slice(0,3)].map((e,r)=>({...e,id:"".concat(t,"-").concat(e.type,"-").concat(r),currentCount:0,isCompleted:!1,order:r+1}))}let c={alphabet:"/learn/alphabet",phonics:"/learn/phonics",words:"/learn/words",speaking:"/learn/speaking",wordMatch:"/games/word-match",memory:"/games/memory",spelling:"/games/spelling",soundQuiz:"/games/sound-quiz"},m={allComplete:100,perfectStreak:50}},1:function(e,t,r){r.d(t,{WO:function(){return c},qm:function(){return p},LM:function(){return d}});var n=r(9625),i=r(6885),s=r(9379);let a={difficulty:"beginner",soundEnabled:!0,musicEnabled:!0,speechRate:.9,autoPlayAudio:!0,showKorean:!0,theme:"light"},o={viserId:"",totalXp:0,level:1,currentStreak:0,longestStreak:0,totalWordsLearned:0,totalSessionsCompleted:0,totalTimeSpentMinutes:0,achievementsUnlocked:[],lastStudyDate:new Date};function l(e){let t=new Date,r=new Date(e);return r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function u(e){let t=new Date;t.setDate(t.getDate()-1);let r=new Date(e);return r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}let d=(0,n.Ue)()((0,i.tJ)((e,t)=>({profile:null,settings:a,stats:o,isInitialized:!1,createProfile:(t,r)=>{let n="user_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9));e({profile:{id:n,nickname:t,avatar:r,createdAt:new Date,lastActiveAt:new Date,settings:a},stats:{...o,viserId:n},isInitialized:!0})},updateProfile:r=>{let{profile:n}=t();n&&e({profile:{...n,...r,lastActiveAt:new Date}})},resetProfile:()=>{e({profile:null,settings:a,stats:o,isInitialized:!1})},updateSettings:r=>{let{settings:n,profile:i}=t(),s={...n,...r};e({settings:s}),i&&e({profile:{...i,settings:s}})},setDifficulty:e=>{t().updateSettings({difficulty:e})},toggleSound:()=>{let{settings:e}=t();t().updateSettings({soundEnabled:!e.soundEnabled})},toggleMusic:()=>{let{settings:e}=t();t().updateSettings({musicEnabled:!e.musicEnabled})},setSpeechRate:e=>{t().updateSettings({speechRate:Math.max(.5,Math.min(2,e))})},addXp:r=>{let{stats:n}=t(),i=n.totalXp+r,a=(0,s.X3)(i);e({stats:{...n,totalXp:i,level:a.level}})},incrementWordsLearned:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{stats:n}=t();e({stats:{...n,totalWordsLearned:n.totalWordsLearned+r}})},completeSession:()=>{let{stats:r}=t();e({stats:{...r,totalSessionsCompleted:r.totalSessionsCompleted+1}}),t().addXp(s.ZT.lessonComplete)},addTimeSpent:r=>{let{stats:n}=t();e({stats:{...n,totalTimeSpentMinutes:n.totalTimeSpentMinutes+r}})},updateStreak:()=>{let{stats:r}=t(),n=new Date(r.lastStudyDate);if(l(n))return;let i=1;u(n)&&(i=r.currentStreak+1);let s=Math.max(r.longestStreak,i);e({stats:{...r,currentStreak:i,longestStreak:s,lastStudyDate:new Date}})},unlockAchievement:r=>{let{stats:n}=t();n.achievementsUnlocked.includes(r)||e({stats:{...n,achievementsUnlocked:[...n.achievementsUnlocked,r]}})},getCurrentLevel:()=>{let{stats:e}=t(),r=(0,s.X3)(e.totalXp),n=r.nextLevelXp>0?r.currentXp/r.nextLevelXp*100:100;return{...r,progress:n}},checkAndUpdateStreak:()=>{let{stats:r}=t(),n=new Date(r.lastStudyDate);l(n)||u(n)||e({stats:{...r,currentStreak:0}})}}),{name:"phonics-quest-user",storage:(0,i.FL)(()=>localStorage),partialize:e=>({profile:e.profile,settings:e.settings,stats:e.stats,isInitialized:e.isInitialized})})),c=(0,n.Ue)((e,t)=>({currentSession:null,currentMode:null,currentDifficulty:"beginner",currentItemIndex:0,totalItems:0,correctAnswers:0,incorrectAnswers:0,streak:0,maxStreak:0,alphabetItems:[],phonicsItems:[],wordItems:[],currentQuestion:null,quizResults:[],isQuizMode:!1,character:{emotion:"happy",message:"오늘도 함께 공부해요!",isAnimating:!1},sessionXp:0,sessionStartTime:null,startSession:(t,r)=>{e({currentSession:{id:"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9)),userId:"",mode:t,difficulty:r,startedAt:new Date,itemsStudied:0,correctAnswers:0,totalQuestions:0,xpEarned:0},currentMode:t,currentDifficulty:r,currentItemIndex:0,correctAnswers:0,incorrectAnswers:0,streak:0,maxStreak:0,sessionXp:0,sessionStartTime:Date.now(),character:{emotion:"happy",message:"시작해볼까요?",isAnimating:!0}}),setTimeout(()=>{e(e=>({character:{...e.character,isAnimating:!1}}))},1e3)},endSession:()=>{let r=t(),n=r.sessionStartTime?Math.floor((Date.now()-r.sessionStartTime)/6e4):0,i=r.correctAnswers+r.incorrectAnswers,a=i>0?r.correctAnswers/i*100:0,o=0;100===a&&i>=5&&(o+=s.ZT.perfectLesson);let l=r.sessionXp+o;return e({currentSession:null,sessionStartTime:null,character:{emotion:a>=80?"celebrating":"encouraging",message:a>=80?"정말 잘했어요!":"다음엔 더 잘할 수 있어요!",isAnimating:!0}}),{xpEarned:l,correctRate:a,timeSpent:n}},setAlphabetItems:t=>{e({alphabetItems:t,totalItems:t.length,currentItemIndex:0})},setPhonicsItems:t=>{e({phonicsItems:t,totalItems:t.length,currentItemIndex:0})},setWordItems:t=>{e({wordItems:t,totalItems:t.length,currentItemIndex:0})},nextItem:()=>{let{currentItemIndex:r,totalItems:n}=t();r<n-1&&e({currentItemIndex:r+1})},previousItem:()=>{let{currentItemIndex:r}=t();r>0&&e({currentItemIndex:r-1})},goToItem:r=>{let{totalItems:n}=t();r>=0&&r<n&&e({currentItemIndex:r})},recordAnswer:function(r){let n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=t(),l=r?o.streak+1:0,u=Math.max(o.maxStreak,l),d=a;r&&(d+=s.ZT.correctAnswer),3===l&&(d+=s.ZT.streak3),5===l&&(d+=s.ZT.streak5),10===l&&(d+=s.ZT.streak10),r?l>=5?(n="excited",i=t().getRandomEncouragement("streak")):(n="happy",i=t().getRandomEncouragement("correct")):(n="encouraging",i=t().getRandomEncouragement("incorrect")),e({correctAnswers:r?o.correctAnswers+1:o.correctAnswers,incorrectAnswers:r?o.incorrectAnswers:o.incorrectAnswers+1,streak:l,maxStreak:u,sessionXp:o.sessionXp+d,character:{emotion:n,message:i,isAnimating:!0}}),setTimeout(()=>{e(e=>({character:{...e.character,isAnimating:!1}}))},1500)},startQuiz:t=>{e({isQuizMode:!0,quizResults:[],currentQuestion:t[0]||null,currentItemIndex:0,totalItems:t.length})},submitQuizAnswer:r=>{let n=t().currentQuestion;if(!n)return{questionId:"",userAnswer:r,isCorrect:!1,timeTaken:0,xpEarned:0};let i=r.toLowerCase().trim()===n.correctAnswer.toLowerCase().trim(),a=i?s.ZT.correctAnswer:0,o={questionId:n.id,userAnswer:r,isCorrect:i,timeTaken:0,xpEarned:a};return t().recordAnswer(i,a),e(e=>({quizResults:[...e.quizResults,o]})),o},endQuiz:()=>{e({isQuizMode:!1,currentQuestion:null})},setCharacterEmotion:(r,n)=>{e({character:{emotion:r,message:n||t().character.message,isAnimating:!0}}),setTimeout(()=>{e(e=>({character:{...e.character,isAnimating:!1}}))},1e3)},resetSession:()=>{e({currentSession:null,currentMode:null,currentItemIndex:0,totalItems:0,correctAnswers:0,incorrectAnswers:0,streak:0,maxStreak:0,alphabetItems:[],phonicsItems:[],wordItems:[],currentQuestion:null,quizResults:[],isQuizMode:!1,sessionXp:0,sessionStartTime:null,character:{emotion:"happy",message:"오늘도 함께 공부해요!",isAnimating:!1}})},getProgress:()=>{let{currentItemIndex:e,totalItems:r}=t();return r>0?(e+1)/r*100:0},getRandomEncouragement:e=>{let t=s._I[e];return t[Math.floor(Math.random()*t.length)]}}));function m(){let e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))}(0,n.Ue)((e,t)=>({gameState:null,isLoading:!1,isPaused:!1,timeRemaining:0,timerInterval:null,finalScore:0,isGameOver:!1,isWinner:!1,selectedItems:[],matchedPairs:[],currentWord:null,userInput:"",hintsUsed:0,revealedLetters:[],initGame:(t,r)=>{e({isLoading:!0});let n=[],i=0,a=r.length;switch(t){case"wordMatch":n=function(e){let t=[];return e.forEach((e,r)=>{t.push({id:"word-".concat(r),content:e.word,isMatched:!1,matchId:"meaning-".concat(r)}),t.push({id:"meaning-".concat(r),content:e.meaning,isMatched:!1,matchId:"word-".concat(r)})}),t.sort(()=>Math.random()-.5)}(r.slice(0,s.th.wordMatch.rounds)),i=s.th.wordMatch.timeLimit,a=s.th.wordMatch.rounds;break;case"memory":let o=Math.min(r.length,s.th.memory.pairCount);n=function(e){let t=[];return e.forEach((e,r)=>{t.push({id:"card-a-".concat(r),content:e.word,isMatched:!1,isFlipped:!1,matchId:"card-b-".concat(r)}),t.push({id:"card-b-".concat(r),content:e.word,isMatched:!1,isFlipped:!1,matchId:"card-a-".concat(r)})}),t.sort(()=>Math.random()-.5)}(r.slice(0,o)),i=s.th.memory.timeLimit,a=o;break;case"spelling":a=Math.min(r.length,s.th.spelling.rounds);break;case"soundQuiz":a=Math.min(r.length,s.th.soundQuiz.rounds)}e({gameState:{gameType:t,currentRound:1,totalRounds:a,score:0,lives:3,timeRemaining:i>0?i:void 0,isPlaying:!1,isPaused:!1,items:n},timeRemaining:i,isLoading:!1,isGameOver:!1,isWinner:!1,selectedItems:[],matchedPairs:[],hintsUsed:0,revealedLetters:[],userInput:""})},startGame:()=>{let{gameState:r}=t();r&&(e({gameState:{...r,isPlaying:!0}}),r.timeRemaining&&t().startTimer())},pauseGame:()=>{let{gameState:r}=t();r&&(t().stopTimer(),e({gameState:{...r,isPaused:!0},isPaused:!0}))},resumeGame:()=>{let{gameState:r}=t();r&&(e({gameState:{...r,isPaused:!1},isPaused:!1}),r.timeRemaining&&t().startTimer())},endGame:()=>{let{gameState:r,matchedPairs:n,timeRemaining:i}=t();if(t().stopTimer(),!r)return{score:0,xpEarned:0,isWinner:!1};let a=r.lives>0&&(r.currentRound>r.totalRounds||n.length>=r.totalRounds),o=0;return a&&(o=s.ZT.gameWin,i&&i>30&&(o+=Math.floor(i/10)*s.th.wordMatch.bonusTimePoints)),e({isGameOver:!0,isWinner:a,finalScore:r.score,gameState:{...r,isPlaying:!1}}),{score:r.score,xpEarned:o,isWinner:a}},resetGame:()=>{t().stopTimer(),e({gameState:null,isLoading:!1,isPaused:!1,timeRemaining:0,timerInterval:null,finalScore:0,isGameOver:!1,isWinner:!1,selectedItems:[],matchedPairs:[],currentWord:null,userInput:"",hintsUsed:0,revealedLetters:[]})},selectItem:r=>{let{selectedItems:n,gameState:i}=t();if(!i||n.includes(r))return;let s=i.items.find(e=>e.id===r);s&&!s.isMatched&&(n.length<2&&e({selectedItems:[...n,r]}),1===n.length&&setTimeout(()=>{t().checkMatch()},500))},checkMatch:()=>{let{selectedItems:r,gameState:n,matchedPairs:i}=t();if(!n||2!==r.length)return!1;let[a,o]=r,l=n.items.find(e=>e.id===a),u=n.items.find(e=>e.id===o);if(!l||!u||!(l.matchId===o||u.matchId===a))return e({selectedItems:[]}),!1;{let r=n.items.map(e=>e.id===a||e.id===o?{...e,isMatched:!0}:e),l=[...i,a,o];return e({gameState:{...n,items:r,score:n.score+s.th.wordMatch.pointsPerMatch},matchedPairs:l,selectedItems:[]}),l.length>=n.items.length&&setTimeout(()=>t().endGame(),500),!0}},setCurrentWord:t=>{e({currentWord:t,userInput:"",revealedLetters:[]})},updateUserInput:t=>{e({userInput:t})},checkSpelling:()=>{let{currentWord:r,userInput:n,gameState:i,hintsUsed:a}=t();if(!r||!i)return!1;let o=n.toLowerCase().trim()===r.word.toLowerCase();if(o){let r=a>0?s.th.spelling.pointsWithHint:s.th.spelling.pointsPerCorrect;e({gameState:{...i,score:i.score+r}}),i.currentRound<i.totalRounds?t().nextRound():t().endGame()}else t().loseLife();return o},useHint:()=>{let{currentWord:r,hintsUsed:n,revealedLetters:i}=t();if(!r||n>=s.th.spelling.hintsAllowed)return null;let a=r.word,o=a.split("").map((e,t)=>t).filter(e=>!i.includes(e));if(0===o.length)return null;let l=o[Math.floor(Math.random()*o.length)];return e({hintsUsed:n+1,revealedLetters:[...i,l]}),a[l]},flipCard:r=>{let{gameState:n,selectedItems:i}=t();if(!n||i.length>=2)return;let a=n.items.find(e=>e.id===r);if(!a||a.isMatched||a.isFlipped)return;let o=n.items.map(e=>e.id===r?{...e,isFlipped:!0}:e);e({gameState:{...n,items:o},selectedItems:[...i,r]}),1===i.length&&setTimeout(()=>{var r,n;let i=t(),[a,o]=i.selectedItems,l=null===(r=i.gameState)||void 0===r?void 0:r.items.find(e=>e.id===a),u=null===(n=i.gameState)||void 0===n?void 0:n.items.find(e=>e.id===o);if(l&&u&&l.matchId===o){let r=i.gameState.items.map(e=>e.id===a||e.id===o?{...e,isMatched:!0}:e);e({gameState:{...i.gameState,items:r,score:i.gameState.score+s.th.memory.pointsPerPair},matchedPairs:[...i.matchedPairs,a,o],selectedItems:[]}),r.every(e=>e.isMatched)&&setTimeout(()=>t().endGame(),500)}else{let t=i.gameState.items.map(e=>e.id===a||e.id===o?{...e,isFlipped:!1}:e);e({gameState:{...i.gameState,items:t},selectedItems:[]})}},1e3)},startTimer:()=>{let{timerInterval:r}=t();r||e({timerInterval:setInterval(()=>{t().decrementTime()},1e3)})},stopTimer:()=>{let{timerInterval:r}=t();r&&(clearInterval(r),e({timerInterval:null}))},decrementTime:()=>{let{timeRemaining:r,gameState:n}=t();if(r<=0){t().endGame();return}e({timeRemaining:r-1,gameState:n?{...n,timeRemaining:r-1}:null})},addScore:r=>{let{gameState:n}=t();n&&e({gameState:{...n,score:n.score+r}})},loseLife:()=>{let{gameState:r}=t();if(!r)return;let n=r.lives-1;n<=0?t().endGame():e({gameState:{...r,lives:n}})},nextRound:()=>{let{gameState:r}=t();r&&e({gameState:{...r,currentRound:r.currentRound+1},userInput:"",revealedLetters:[]})}}));let p=(0,n.Ue)()((0,i.tJ)((e,t)=>({dailyMissions:null,missionStreak:0,lastCompletedDate:null,initializeDailyMissions:r=>{let n=m(),{dailyMissions:i,lastCompletedDate:a}=t();if(i&&i.date===n)return;let o=0;if(a){let e=new Date;e.setDate(e.getDate()-1),a==="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))&&(o=t().missionStreak+1)}let l=(0,s.YO)(r,n);e({dailyMissions:{date:n,missions:l,totalMissions:l.length,completedMissions:0,bonusXpClaimed:!1},missionStreak:o})},updateMissionProgress:(r,n)=>{let{dailyMissions:i}=t();if(!i)return;let s=m();if(i.date!==s)return;let a=i.missions.map(e=>{if(e.type===r&&!e.isCompleted){let t=e.currentCount+n,r=t>=e.targetCount;return{...e,currentCount:Math.min(t,e.targetCount),isCompleted:r}}return e}),o=a.filter(e=>e.isCompleted).length;e({dailyMissions:{...i,missions:a,completedMissions:o}})},completeMission:r=>{let{dailyMissions:n}=t();if(!n)return{xpEarned:0,allComplete:!1};let i=n.missions.find(e=>e.id===r);if(!i||i.isCompleted)return{xpEarned:0,allComplete:!1};let s=n.missions.map(e=>e.id===r?{...e,isCompleted:!0,currentCount:e.targetCount}:e),a=s.filter(e=>e.isCompleted).length,o=a===n.totalMissions;return e({dailyMissions:{...n,missions:s,completedMissions:a}}),o&&e({lastCompletedDate:n.date,missionStreak:t().missionStreak+1}),{xpEarned:i.xpReward,allComplete:o}},claimDailyBonus:()=>{let{dailyMissions:r,missionStreak:n}=t();if(!r||r.bonusXpClaimed||r.completedMissions!==r.totalMissions)return 0;let i=s.YD.allComplete;return n>=3&&(i+=s.YD.perfectStreak),e({dailyMissions:{...r,bonusXpClaimed:!0}}),i},resetMissions:()=>{e({dailyMissions:null,missionStreak:0,lastCompletedDate:null})},getMissionByType:e=>{let{dailyMissions:r}=t();if(r)return r.missions.find(t=>t.type===e)},getTodayProgress:()=>{let{dailyMissions:e}=t();return e?{completed:e.completedMissions,total:e.totalMissions,percentage:e.completedMissions/e.totalMissions*100}:{completed:0,total:0,percentage:0}},checkAndRefreshMissions:e=>{let{dailyMissions:r}=t(),n=m();r&&r.date===n||t().initializeDailyMissions(e)}}),{name:"phonics-quest-missions",storage:(0,i.FL)(()=>localStorage),partialize:e=>({dailyMissions:e.dailyMissions,missionStreak:e.missionStreak,lastCompletedDate:e.lastCompletedDate})}))}}]);