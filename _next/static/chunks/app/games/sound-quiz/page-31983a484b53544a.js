(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{9903:function(e,t,s){Promise.resolve().then(s.bind(s,7284))},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9076:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},7284:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),l=s(2265),r=s(9376),i=s(5095),c=s(429),n=s(2660),d=s(1723),o=s(9474),x=s(1706),m=s(5302);let u=(0,s(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=s(9076),p=s(7509),g=s(1592),b=s(3905),f=s(8857),j=s(3448),y=s(4275),N=s(5480);function v(){let e=(0,r.useRouter)(),{settings:t,addXp:s,updateStreak:v}=(0,p.LM)(),{updateMissionProgress:w}=(0,p.qm)(),[k,D]=(0,l.useState)("intro"),[z,C]=(0,l.useState)([]),[E,S]=(0,l.useState)(0),[Z,A]=(0,l.useState)(null),[M,T]=(0,l.useState)(null),[W,_]=(0,l.useState)(0),[q,F]=(0,l.useState)(0),[I,L]=(0,l.useState)(0),[R,H]=(0,l.useState)(!1),[P,O]=(0,l.useState)(120),[Q,G]=(0,l.useState)(!1),V=z[E],X=(0,l.useCallback)(()=>{let e=(0,f.mS)(40,t.difficulty),s=[];for(let t=0;t<10;t++){let a=4*t,l=e.slice(a,a+4);4===l.length&&s.push({correctWord:l[0],options:(0,j.Sy)([...l])})}C(s),S(0),A(null),T(null),_(0),F(0),L(0),O(120),D("playing")},[t.difficulty]);(0,l.useEffect)(()=>{if("playing"!==k)return;let e=setInterval(()=>{O(t=>t<=1?(clearInterval(e),K(),0):t-1)},1e3);return()=>clearInterval(e)},[k]);let B=(0,l.useCallback)(()=>{V&&!Q&&(G(!0),(0,y.cP)(V.correctWord.word,t.speechRate),setTimeout(()=>{G(!1)},1500))},[V,t.speechRate,Q]);(0,l.useEffect)(()=>{if("playing"===k&&V&&t.autoPlayAudio){let e=setTimeout(()=>{B()},500);return()=>clearTimeout(e)}},[E,k]);let J=e=>{if(null!==Z||"playing"!==k)return;A(e);let t=e===V.correctWord.id;if(T(t),t){let e=10+(I>=2?Math.min(2*I,10):0)+(P>60?5:0);_(t=>t+e),F(e=>e+1),L(e=>e+1),w("soundQuiz",1)}else L(0);D("feedback"),setTimeout(()=>{E+1>=10?K():(S(e=>e+1),A(null),T(null),D("playing"))},2e3)},K=()=>{if(D("complete"),q>0){H(!0);let e=Math.floor(W/2);s(W+e),v(),setTimeout(()=>H(!1),3e3)}};return(0,a.jsxs)("div",{className:"min-h-screen pb-6",children:[(0,a.jsx)(b.Gr,{isActive:R}),(0,a.jsx)("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-amber-100",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(n.Z,{size:24,className:"text-gray-600"})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"소리 퀴즈"}),(0,a.jsx)("div",{className:"w-10"})]}),("playing"===k||"feedback"===k)&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(d.Z,{size:18}),(0,a.jsx)("span",{className:(0,j.cn)("font-bold",P<=20&&"text-red-500"),children:"".concat(Math.floor(P/60),":").concat(String(P%60).padStart(2,"0"))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-orange-500 text-sm",children:"\uD83D\uDD25"}),(0,a.jsx)("span",{className:"font-bold text-orange-600",children:I})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{size:18,className:"text-amber-500"}),(0,a.jsx)("span",{className:"font-bold",children:W})]})]}),(0,a.jsx)("div",{className:"w-24",children:(0,a.jsx)(g.ko,{value:(E+1)/10*100,size:"sm",color:"green"})})]})]})}),(0,a.jsx)("main",{className:"max-w-2xl mx-auto px-4 py-6",children:(0,a.jsxs)(i.M,{mode:"wait",children:["intro"===k&&(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col items-center text-center",children:[(0,a.jsx)(c.E.div,{className:"text-8xl mb-6",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},children:"\uD83D\uDD0A"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"소리 퀴즈 게임"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-8",children:["소리를 듣고 맞는 단어를",(0,a.jsx)("br",{}),"선택하세요!"]}),(0,a.jsx)(g.Zb,{className:"w-full max-w-sm mb-8",children:(0,a.jsxs)("div",{className:"space-y-2 text-left text-sm text-gray-600",children:[(0,a.jsx)("p",{children:"\uD83D\uDD0A 스피커 버튼을 눌러 소리를 들으세요"}),(0,a.jsx)("p",{children:"\uD83C\uDFAF 4개의 보기 중 정답을 선택하세요"}),(0,a.jsx)("p",{children:"\uD83D\uDD25 연속 정답 시 보너스 점수!"}),(0,a.jsx)("p",{children:"⏱️ 제한 시간: 2분"})]})}),(0,a.jsx)(g.zx,{size:"lg",onClick:X,children:"게임 시작"})]},"intro"),("playing"===k||"feedback"===k)&&V&&(0,a.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[E+1," / ",10]}),(0,a.jsx)(b.zk,{state:{emotion:!0===M?"celebrating":!1===M?"encouraging":"happy",message:!0===M?"정답이에요! 잘했어요!":!1===M?"아쉬워요, 다음엔 맞출 수 있어요!":"소리를 잘 들어보세요!",isAnimating:!1},size:"sm",className:"mb-4"}),(0,a.jsxs)(c.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:B,disabled:Q,className:(0,j.cn)("w-32 h-32 rounded-full flex flex-col items-center justify-center mb-8 shadow-lg transition-all",Q?"bg-blue-300 cursor-not-allowed":"bg-gradient-to-br from-blue-400 to-cyan-400 hover:shadow-xl"),children:[(0,a.jsx)(c.E.div,{animate:Q?{scale:[1,1.2,1]}:{},transition:{duration:.5,repeat:1/0},children:(0,a.jsx)(x.Z,{size:48,className:"text-white"})}),(0,a.jsx)("span",{className:"text-white text-sm mt-2",children:Q?"재생 중...":"소리 듣기"})]}),(0,a.jsx)("div",{className:"w-full grid grid-cols-2 gap-4",children:V.options.map((e,t)=>{let s=Z===e.id,l=e.id===V.correctWord.id,r="feedback"===k,i=(0,N.QH)(e.word);return(0,a.jsxs)(c.E.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:r?void 0:{scale:1.02},whileTap:r?void 0:{scale:.98},onClick:()=>J(e.id),disabled:r,className:(0,j.cn)("p-4 rounded-kid-lg text-left transition-all relative overflow-hidden",r?l?"bg-green-100 border-2 border-green-400":s?"bg-red-100 border-2 border-red-400":"bg-gray-100 border-2 border-gray-200":"bg-white border-2 border-gray-200 hover:border-amber-400 hover:shadow-md"),children:[r&&(l||s)&&(0,a.jsx)("div",{className:"absolute top-2 right-2 z-10",children:l?(0,a.jsx)(m.Z,{className:"text-green-500",size:24}):s?(0,a.jsx)(u,{className:"text-red-500",size:24}):null}),(0,a.jsx)("div",{className:"w-full h-20 rounded-lg overflow-hidden bg-gray-200 mb-2",children:(0,a.jsx)("img",{src:i,alt:e.word,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),(0,a.jsx)("p",{className:(0,j.cn)("text-lg font-bold mb-1",r?l?"text-green-700":s?"text-red-700":"text-gray-500":"text-gray-800"),children:e.word}),(0,a.jsx)("p",{className:(0,j.cn)("text-sm",r?l?"text-green-600":s?"text-red-600":"text-gray-400":"text-gray-500"),children:e.meaning})]},e.id)})}),"feedback"===k&&(0,a.jsx)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,j.cn)("mt-6 p-4 rounded-lg text-center w-full",M?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:M?(0,a.jsxs)("p",{className:"font-bold",children:["정답! ",I>1&&"\uD83D\uDD25 ".concat(I,"연속!")]}):(0,a.jsxs)("p",{children:["정답은 ",(0,a.jsx)("strong",{children:V.correctWord.word})," (",V.correctWord.meaning,")"]})})]},"playing"),"complete"===k&&(0,a.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center text-center",children:[(0,a.jsx)(c.E.div,{className:"text-8xl mb-6",animate:{scale:[1,1.2,1]},transition:{duration:.8},children:q>=8?"\uD83C\uDFC6":q>=5?"\uD83C\uDF89":"\uD83D\uDCAA"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"게임 완료!"}),(0,a.jsxs)(g.Zb,{className:"w-full max-w-sm mb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:[q,"/",10]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"정답"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:W}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"점수"})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"정답률"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(g.ko,{value:q/10*100,size:"md",color:q>=7?"green":q>=4?"amber":"red",showLabel:!0})})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(g.zx,{variant:"outline",onClick:X,leftIcon:(0,a.jsx)(h.Z,{}),children:"다시 하기"}),(0,a.jsx)(g.zx,{onClick:()=>e.push("/games"),children:"게임 목록"})]})]},"complete")]})})]})}}},function(e){e.O(0,[609,324,112,385,365,592,509,905,577,971,117,744],function(){return e(e.s=9903)}),_N_E=e.O()}]);